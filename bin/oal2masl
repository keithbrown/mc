#!/bin/bash
# 
#  This utility is used to convert OAL activities to MASL activities
#  using a custom model compiler. 
#
#   oal2masl -w <workspace path> -p <project name> 

# USAGE
print_usage () { 
    echo "Usage:"
    echo "        oal2masl -w <workspace path> -p <project name>";
    echo " ";
}

# set up paths
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/"
export PATH=$DIR:$PATH

# input variables
PROJECT=
WKSP_PATH=

# parse arguments
DIRECTIVE=
for arg in $@; do
    if [[ $arg == "-w" || $arg == "-p" ]]; then     # set the directive
        DIRECTIVE=$arg
    elif [[ $DIRECTIVE == "-w" ]]; then             # add the workspace
        WKSP_PATH=$arg
    elif [[ $DIRECTIVE == "-p" ]]; then             # add a project dir
        PROJECT=$arg
    else
        print_usage
        exit 1
    fi
done

# check if we have any project to convert
if [[ $WKSP_PATH == "" || $PROJECT == "" ]]; then
    print_usage
    exit 1
fi

export WORKSPACE="$WKSP_PATH"

if [[ $PROJECT != "" ]]; then
    echo "Converting OAL to MASL for project $PROJECT"

    # Move mcmc to mcmc.no
    # Move special arc folder into place

    CLI.sh Build -project $PROJECT 

    # Move mcmc.no to mcmc
    # Move special arc folder back out of the way

fi

echo -e "\n"

